@tailwind base;
@tailwind components;
@tailwind utilities;

/* Theme transition - smooth color changes */
* {
  transition: background-color 0.2s ease, border-color 0.2s ease, color 0.15s ease;
}

/* Prevent transition on page load */
.no-transition * {
  transition: none !important;
}

/* Base styles */
body {
  @apply bg-gray-50 text-gray-900 antialiased;
}

.dark body {
  @apply bg-dark-bg text-dark-text;
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-gray-100;
}

::-webkit-scrollbar-thumb {
  @apply bg-gray-300 rounded-full hover:bg-gray-400;
}

.dark ::-webkit-scrollbar-track {
  @apply bg-gray-800;
}

.dark ::-webkit-scrollbar-thumb {
  @apply bg-gray-600 hover:bg-gray-500;
}

@layer components {
  /* Buttons */
  .btn {
    @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-sm {
    @apply px-3 py-1 text-sm;
  }

  .btn-primary {
    @apply bg-primary text-white hover:bg-primary-600 hover:shadow-md active:scale-[0.98];
  }

  .dark .btn-primary {
    @apply bg-blue-600 hover:bg-blue-500 shadow-dark-sm hover:shadow-dark-md;
  }

  .btn-secondary {
    @apply bg-secondary text-primary hover:bg-secondary-400 hover:shadow-md active:scale-[0.98];
  }

  .dark .btn-secondary {
    @apply bg-secondary-500 text-gray-900 hover:bg-secondary-400;
  }

  .btn-outline {
    @apply border-2 border-primary text-primary hover:bg-primary hover:text-white;
  }

  .dark .btn-outline {
    @apply border-blue-500 text-blue-400 hover:bg-blue-600 hover:text-white hover:border-blue-600;
  }

  .btn-danger {
    @apply bg-red-600 text-white hover:bg-red-500 hover:shadow-md active:scale-[0.98];
  }

  .dark .btn-danger {
    @apply bg-red-700 hover:bg-red-600;
  }

  .btn-ghost {
    @apply text-gray-600 hover:bg-gray-100 hover:text-gray-900;
  }

  .dark .btn-ghost {
    @apply text-gray-400 hover:bg-gray-700 hover:text-gray-100;
  }

  /* Inputs */
  .input {
    @apply w-full px-4 py-2 border border-gray-300 rounded-lg
           focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary
           bg-white text-gray-900 placeholder-gray-400;
  }

  .dark .input {
    @apply bg-gray-800 border-gray-600 text-gray-100 placeholder-gray-500
           focus:ring-blue-500/50 focus:border-blue-500;
  }

  /* Select */
  select.input {
    @apply appearance-none bg-no-repeat bg-right pr-10;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-size: 1.5em 1.5em;
  }

  .dark select.input {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
  }

  /* Cards */
  .card {
    @apply bg-white rounded-xl shadow-md p-6 border border-gray-100;
  }

  .dark .card {
    @apply bg-dark-card border-dark-border shadow-dark-md;
  }

  .card-hover {
    @apply card hover:shadow-lg hover:border-gray-200 cursor-pointer;
  }

  .dark .card-hover {
    @apply hover:shadow-dark-lg hover:border-gray-600 hover:bg-gray-700/50;
  }

  /* Tables */
  .table-container {
    @apply overflow-x-auto rounded-xl border border-gray-200;
  }

  .dark .table-container {
    @apply border-dark-border;
  }

  table {
    @apply w-full;
  }

  th {
    @apply px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider bg-gray-50 border-b border-gray-200;
  }

  .dark th {
    @apply bg-gray-800 text-gray-400 border-dark-border;
  }

  td {
    @apply px-4 py-3 border-b border-gray-100;
  }

  .dark td {
    @apply border-gray-700/50;
  }

  tr:hover td {
    @apply bg-gray-50;
  }

  .dark tr:hover td {
    @apply bg-gray-700/30;
  }

  /* Badges */
  .badge {
    @apply px-2.5 py-1 text-xs font-semibold rounded-full inline-flex items-center;
  }

  .badge-draft {
    @apply bg-gray-100 text-gray-700 ring-1 ring-gray-200;
  }
  .dark .badge-draft {
    @apply bg-gray-700 text-gray-300 ring-gray-600;
  }

  .badge-submitted {
    @apply bg-blue-100 text-blue-700 ring-1 ring-blue-200;
  }
  .dark .badge-submitted {
    @apply bg-blue-900/50 text-blue-300 ring-blue-800;
  }

  .badge-in-review {
    @apply bg-yellow-100 text-yellow-700 ring-1 ring-yellow-200;
  }
  .dark .badge-in-review {
    @apply bg-yellow-900/50 text-yellow-300 ring-yellow-800;
  }

  .badge-approved {
    @apply bg-green-100 text-green-700 ring-1 ring-green-200;
  }
  .dark .badge-approved {
    @apply bg-green-900/50 text-green-300 ring-green-800;
  }

  .badge-rejected {
    @apply bg-red-100 text-red-700 ring-1 ring-red-200;
  }
  .dark .badge-rejected {
    @apply bg-red-900/50 text-red-300 ring-red-800;
  }

  .badge-implemented {
    @apply bg-purple-100 text-purple-700 ring-1 ring-purple-200;
  }
  .dark .badge-implemented {
    @apply bg-purple-900/50 text-purple-300 ring-purple-800;
  }

  .badge-success {
    @apply bg-green-100 text-green-700 ring-1 ring-green-200;
  }
  .dark .badge-success {
    @apply bg-green-900/50 text-green-300 ring-green-800;
  }

  .badge-secondary {
    @apply bg-gray-100 text-gray-700 ring-1 ring-gray-200;
  }
  .dark .badge-secondary {
    @apply bg-gray-700 text-gray-300 ring-gray-600;
  }

  .badge-warning {
    @apply bg-orange-100 text-orange-700 ring-1 ring-orange-200;
  }
  .dark .badge-warning {
    @apply bg-orange-900/50 text-orange-300 ring-orange-800;
  }

  .badge-info {
    @apply bg-cyan-100 text-cyan-700 ring-1 ring-cyan-200;
  }
  .dark .badge-info {
    @apply bg-cyan-900/50 text-cyan-300 ring-cyan-800;
  }

  /* Alerts */
  .alert {
    @apply p-4 rounded-lg border;
  }

  .alert-success {
    @apply bg-green-50 border-green-200 text-green-800;
  }
  .dark .alert-success {
    @apply bg-green-900/20 border-green-800 text-green-300;
  }

  .alert-error {
    @apply bg-red-50 border-red-200 text-red-800;
  }
  .dark .alert-error {
    @apply bg-red-900/20 border-red-800 text-red-300;
  }

  .alert-warning {
    @apply bg-yellow-50 border-yellow-200 text-yellow-800;
  }
  .dark .alert-warning {
    @apply bg-yellow-900/20 border-yellow-800 text-yellow-300;
  }

  .alert-info {
    @apply bg-blue-50 border-blue-200 text-blue-800;
  }
  .dark .alert-info {
    @apply bg-blue-900/20 border-blue-800 text-blue-300;
  }

  /* Modal/Dialog */
  .modal-overlay {
    @apply fixed inset-0 bg-black/50 backdrop-blur-sm z-50;
  }

  .dark .modal-overlay {
    @apply bg-black/70;
  }

  .modal {
    @apply bg-white rounded-2xl shadow-xl max-w-lg w-full mx-4;
  }

  .dark .modal {
    @apply bg-dark-card shadow-dark-lg border border-dark-border;
  }

  /* Dropdown */
  .dropdown {
    @apply absolute z-50 mt-1 bg-white rounded-lg shadow-lg border border-gray-200 py-1 min-w-[200px];
  }

  .dark .dropdown {
    @apply bg-dark-card border-dark-border shadow-dark-lg;
  }

  .dropdown-item {
    @apply px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer;
  }

  .dark .dropdown-item {
    @apply text-gray-300 hover:bg-gray-700;
  }

  /* Tooltip */
  .tooltip {
    @apply absolute z-50 px-2 py-1 text-xs font-medium text-white bg-gray-900 rounded shadow-lg;
  }

  .dark .tooltip {
    @apply bg-gray-700 text-gray-100;
  }

  /* Skeleton loading */
  .skeleton {
    @apply animate-pulse bg-gray-200 rounded;
  }

  .dark .skeleton {
    @apply bg-gray-700;
  }

  /* Links */
  .link {
    @apply text-primary hover:text-primary-600 underline-offset-2 hover:underline;
  }

  .dark .link {
    @apply text-blue-400 hover:text-blue-300;
  }

  /* Divider */
  .divider {
    @apply border-t border-gray-200;
  }

  .dark .divider {
    @apply border-gray-700;
  }

  /* Header dark mode */
  .header-dark {
    @apply bg-gradient-to-r from-primary to-primary-700;
  }

  .dark .header-dark {
    @apply from-gray-800 to-gray-900 border-b border-gray-700;
  }
}

/* Gradient text for dark mode */
.dark .gradient-text {
  @apply bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent;
}

/* Focus ring styles */
.focus-ring {
  @apply focus:outline-none focus:ring-2 focus:ring-primary/50 focus:ring-offset-2;
}

.dark .focus-ring {
  @apply focus:ring-blue-500/50 focus:ring-offset-gray-900;
}

/* ==================== MOBILE / PWA STYLES ==================== */

/* Safe area for notch devices */
@supports (padding: max(0px)) {
  .safe-area-top {
    padding-top: max(env(safe-area-inset-top), 0px);
  }
  .safe-area-bottom {
    padding-bottom: max(env(safe-area-inset-bottom), 0px);
  }
}

/* Mobile-friendly touch targets */
@media (max-width: 768px) {
  .btn {
    @apply min-h-[44px] px-4;
  }

  .input {
    @apply min-h-[44px] text-base;
  }

  /* Prevent zoom on input focus (iOS) */
  input, select, textarea {
    font-size: 16px !important;
  }

  /* Better spacing on mobile */
  .container {
    @apply px-4;
  }

  /* Stack cards on mobile */
  .card {
    @apply p-4;
  }

  /* Mobile navigation improvements */
  nav a, nav button {
    @apply py-2 px-3;
  }

  /* Mobile table scroll */
  .table-container {
    @apply -mx-4 px-4;
  }

  /* Mobile modal fullscreen */
  .modal {
    @apply mx-0 rounded-none min-h-screen max-w-full;
  }
}

/* Small mobile devices */
@media (max-width: 375px) {
  .btn {
    @apply text-sm px-3;
  }

  h1 {
    @apply text-2xl;
  }

  h2 {
    @apply text-xl;
  }
}

/* Tablet and larger */
@media (min-width: 768px) {
  /* Better hover states on desktop */
  .card-hover:hover {
    transform: translateY(-2px);
  }
}

/* PWA standalone mode */
@media (display-mode: standalone) {
  /* Hide browser-specific UI elements */
  .browser-only {
    display: none !important;
  }

  /* Add padding for status bar */
  header {
    padding-top: env(safe-area-inset-top);
  }
}

/* Touch device optimizations */
@media (hover: none) and (pointer: coarse) {
  /* Disable hover effects on touch devices */
  .card-hover:hover {
    transform: none;
  }

  /* Larger touch targets */
  .dropdown-item {
    @apply py-3;
  }

  /* Better scroll behavior */
  .table-container {
    -webkit-overflow-scrolling: touch;
  }
}

/* Print styles */
@media print {
  .no-print {
    display: none !important;
  }

  body {
    @apply bg-white text-black;
  }

  .card {
    @apply shadow-none border border-gray-300;
  }
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* Bottom navigation for mobile (optional - can be added to components) */
.bottom-nav {
  @apply fixed bottom-0 left-0 right-0 bg-white dark:bg-dark-card border-t border-gray-200 dark:border-dark-border;
  padding-bottom: env(safe-area-inset-bottom);
}

.bottom-nav-item {
  @apply flex flex-col items-center justify-center py-2 px-4 text-xs text-gray-600 dark:text-gray-400;
}

.bottom-nav-item.active {
  @apply text-primary dark:text-blue-400;
}

/* Pull to refresh indicator */
.pull-indicator {
  @apply absolute top-0 left-1/2 -translate-x-1/2 -translate-y-full p-4 transition-transform;
}

/* Swipe actions for list items */
.swipe-action {
  @apply absolute inset-y-0 flex items-center justify-center px-4;
}

.swipe-action-left {
  @apply left-0 bg-red-500 text-white;
}

.swipe-action-right {
  @apply right-0 bg-green-500 text-white;
}
